
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../Figures/modularsmall.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.8">
    
    
      
        <title>Controller Class - GUILDA Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#02a6f2">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700%7C&display=fallback">
        <style>body,input{font-family:"Open Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosansjp.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:600,800">
    
      <link rel="stylesheet" href="https://unpkg.com/mermaid@8.0.0/dist/mermaid.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="light-blue">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#controller_class" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="GUILDA Documentation" class="md-header-nav__button md-logo" aria-label="GUILDA Documentation">
      
  <img src="../../Figures/modularsmall.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            GUILDA Documentation
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Controller Class
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link md-tabs__link--active">
        Top
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="GUILDA Documentation" class="md-nav__button md-logo" aria-label="GUILDA Documentation">
      
  <img src="../../Figures/modularsmall.png" alt="logo">

    </a>
    GUILDA Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" checked>
      
      <label class="md-nav__link" for="nav-1">
        Top
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Top" data-md-level="1">
        <label class="md-nav__title" for="nav-1">
          <span class="md-nav__icon md-icon"></span>
          Top
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SetEnvironment/0TopPage/" class="md-nav__link">
        GUILDA Setup
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../aboutPowerSystem/0TopPage/" class="md-nav__link">
        Power System Model (Simple)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SeriesAnalysis/0TopPage/" class="md-nav__link">
        Guided Example
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1-5" type="checkbox" id="nav-1-5" >
      
      <label class="md-nav__link" for="nav-1-5">
        Guilda in Detail
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Guilda in Detail" data-md-level="2">
        <label class="md-nav__title" for="nav-1-5">
          <span class="md-nav__icon md-icon"></span>
          Guilda in Detail
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/0TopPage/" class="md-nav__link">
        Guilda in Detail
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1-5-2" type="checkbox" id="nav-1-5-2" >
      
      <label class="md-nav__link" for="nav-1-5-2">
        Power System Model (Detailed)
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Power System Model (Detailed)" data-md-level="3">
        <label class="md-nav__title" for="nav-1-5-2">
          <span class="md-nav__icon md-icon"></span>
          Power System Model (Detailed)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/defineNet/0TopPage/" class="md-nav__link">
        Power System Model (Detailed)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/defineNet/NewPowerNetwork/" class="md-nav__link">
        New Power System Model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/defineNet/NewComponent/" class="md-nav__link">
        New Components
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1-5-3" type="checkbox" id="nav-1-5-3" >
      
      <label class="md-nav__link" for="nav-1-5-3">
        Controllers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Controllers" data-md-level="3">
        <label class="md-nav__title" for="nav-1-5-3">
          <span class="md-nav__icon md-icon"></span>
          Controllers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/addController/0TopPage/" class="md-nav__link">
        Controllers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/addController/NewController/" class="md-nav__link">
        New Controller
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1-5-4" type="checkbox" id="nav-1-5-4" >
      
      <label class="md-nav__link" for="nav-1-5-4">
        Numerical Simulations
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Numerical Simulations" data-md-level="3">
        <label class="md-nav__title" for="nav-1-5-4">
          <span class="md-nav__icon md-icon"></span>
          Numerical Simulations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/Analysis/net_simulate/" class="md-nav__link">
        Simulating
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/Analysis/SampleCode/" class="md-nav__link">
        Simulation Examples
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/Analysis/net_getsys/" class="md-nav__link">
        Derivation of a Linearized Model
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1-6" type="checkbox" id="nav-1-6" checked>
      
      <label class="md-nav__link" for="nav-1-6">
        Source Code Explanation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Source Code Explanation" data-md-level="2">
        <label class="md-nav__title" for="nav-1-6">
          <span class="md-nav__icon md-icon"></span>
          Source Code Explanation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../0TopPage/" class="md-nav__link">
        Source Code Explanation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../power_network/" class="md-nav__link">
        Power Network Class
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NetProperties/" class="md-nav__link">
        Power Network Class - Properties
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../branch/" class="md-nav__link">
        Branch Class
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../bus/" class="md-nav__link">
        Bus Class
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../component/" class="md-nav__link">
        Component Class
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Controller Class
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Controller Class
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#controller_class_1" class="md-nav__link">
    Controller Class
  </a>
  
    <nav class="md-nav" aria-label="Controller Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required_methods" class="md-nav__link">
    Required Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recommended_methods" class="md-nav__link">
    Recommended Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#abstract_methods" class="md-nav__link">
    Abstract Methods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic_generation_control_agc" class="md-nav__link">
    Automatic Generation Control (AGC)
  </a>
  
    <nav class="md-nav" aria-label="Automatic Generation Control (AGC)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variables_1" class="md-nav__link">
    Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constructor_method" class="md-nav__link">
    Constructor Method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#controller_class_1" class="md-nav__link">
    Controller Class
  </a>
  
    <nav class="md-nav" aria-label="Controller Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required_methods" class="md-nav__link">
    Required Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recommended_methods" class="md-nav__link">
    Recommended Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#abstract_methods" class="md-nav__link">
    Abstract Methods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic_generation_control_agc" class="md-nav__link">
    Automatic Generation Control (AGC)
  </a>
  
    <nav class="md-nav" aria-label="Automatic Generation Control (AGC)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variables_1" class="md-nav__link">
    Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constructor_method" class="md-nav__link">
    Constructor Method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="controller_class"><div style="text-align: center;"><span style="font-size: 140%; color: black; font-weight: bold">Controller Class</span></div><a class="headerlink" href="#controller_class" title="Permanent link">&para;</a></h1>
<p>This page explains the variables and functions used in the controller class (<code>controller</code>).</p>
<p><strong>Contents:</strong></p>
<ul>
<li><a href="#controller_class_1">Controller Class</a></li>
<li><a href="#automatic_generation_control_agc">Automatic Generation Control (AGC)</a></li>
</ul>
<hr />
<h2 id="controller_class_1"><div style="text-align: center;"><span style="font-size: 120%; color: black; font-weight: bold">Controller Class</span></div><a class="headerlink" href="#controller_class_1" title="Permanent link">&para;</a></h2>
<p>In GUILDA, the controllers are classified into two categories: local controllers and global controllers.</p>
<ul>
<li>
<p><strong>Local Controller:</strong> A controller that is added locally to each device. Example: Retrofit controller.</p>
</li>
<li>
<p><strong>Global Controller:</strong> A controller for multiple devices. Example: Automatic Generation Control (AGC).</p>
</li>
</ul>
<p>Both of these controllers are defined as objects of the controller class. The difference is that the local controller includes the input value of the global controller as an argument. This can be seen in the code, for example with the method "Controller State Derivative" (<code>get_dx_u</code>), which is defined in the controller class, but it is called differently, depending on the controller type, as follows.</p>
<ul>
<li>Controller State Derivative - Local Controller
  <div class="highlight"><pre><span></span><code><span class="p">[</span><span class="n">dx</span><span class="p">,</span> <span class="n">u</span><span class="p">]</span> <span class="p">=</span> <span class="n">get_dx_u</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">u_global</span><span class="p">)</span>
</code></pre></div></li>
<li>Controller State Derivative - Global Controller
  <div class="highlight"><pre><span></span><code><span class="p">[</span><span class="n">dx</span><span class="p">,</span> <span class="n">u</span><span class="p">]</span> <span class="p">=</span> <span class="n">get_dx_u</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="p">[])</span>
</code></pre></div></li>
</ul>
<h3 id="variables"><div style="text-align: left;"><span style="font-size: 100%; color: black; font-weight: bold">Variables</span></div><a class="headerlink" href="#variables" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>idx_input</code>: Busbar number to which the output signal of the controller (i.e., the input signal to the system) are applied.</p>
</li>
<li>
<p><code>idx_observe</code>: Busbar number observed by the controller.</p>
</li>
<li>
<p><code>idx</code>：<code>idx_input</code> and <code>idx_observe</code> as aligned vectors.</p>
</li>
<li>
<p><code>get_dx_u_func</code>: Anonymous functio that must be specified for each instance, for example <code>get_dx_u</code> for the predefined controllers in GUILDA.</p>
</li>
</ul>
<h3 id="required_methods"><div style="text-align: left;"><span style="font-size: 100%; color: black; font-weight: bold">Required Methods</span></div><a class="headerlink" href="#required_methods" title="Permanent link">&para;</a></h3>
<p><strong>Controller State Derivative</strong></p>
<p>This method is used to obtain the derivative of the controller state <span class="arithmatex">\(\small (x)\)</span>; and the output signal <span class="arithmatex">\((\small u)\)</span> (i.e., the input signal to the system).</p>
<p>Class Structure: <code>[dx, u] = get_dx_u(obj, x, X, V, I, U_global)</code></p>
<p><em>Note: The following notation is different to the ones used in other classes, e.g., Component class.</em></p>
<p>Input Arguments</p>
<ul>
<li>
<p><code>x</code>：Controller state <span class="arithmatex">\(\small (x)\)</span>.</p>
</li>
<li>
<p><code>X</code>：State of the Device connected to each bus <span class="arithmatex">\(\small (X)\)</span>.</p>
</li>
<li>
<p><code>V</code>：Busbar Voltage <span class="arithmatex">\(\small (V)\)</span> ([real part; imaginarty part]).</p>
</li>
<li>
<p><code>I</code>：Busbar Current <span class="arithmatex">\(\small (I)\)</span> ([real part; imaginarty part]).</p>
</li>
<li>
<p><code>U_global</code>： Input signals applied to each bus by the global controller <span class="arithmatex">\(\small (U)\)</span>.</p>
</li>
</ul>
<p>The controller model can only observe the above parameters. Therefore, even if there are other physical quantities required, they will have to be calculated on their own from the values of the arguments.</p>
<p>Output Parameters</p>
<ul>
<li>
<p><code>dx</code>：Dertivative of the controller state <span class="arithmatex">\(\small (\dot{x})\)</span>.</p>
</li>
<li>
<p><code>u</code>：Output signal of the controller (i.e., input signal to the system) <span class="arithmatex">\(\small (u)\)</span>.</p>
</li>
</ul>
<p><em>Note:</em></p>
<ul>
<li>
<p><em>The controller class is commonly inherited by the global controller, retrofit controller, and other controllers. Therefore, when creating a distributed controller, it is necessary to explicitly write which signals may be referenced and which signals may not be referenced, in the derived class.</em></p>
</li>
<li>
<p><em>It is not possible to reference the state of other controllers. If communication between controllers is required, they must be implemented as a single controller.</em></p>
</li>
</ul>
<p><strong>Controller State Order</strong></p>
<p>This method is used to obtain the order (dimension) of the controller state.</p>
<p>Class Structure:<code>nx = get_nx(obj)</code></p>
<p>Input Arguments</p>
<ul>
<li><em>None</em></li>
</ul>
<p>Output Parameters</p>
<ul>
<li><code>nx</code>: Oder of the controller state.</li>
</ul>
<h3 id="recommended_methods"><div style="text-align: left;"><span style="font-size: 100%; color: black; font-weight: bold">Recommended Methods</span></div><a class="headerlink" href="#recommended_methods" title="Permanent link">&para;</a></h3>
<p>The newly defined controller can be implemented without the following methods; however, these are necessary for performing analysis with an approximate linearization of the power system model.</p>
<p><strong>Approximate Linearization</strong></p>
<p>This method, as the name states, allows to linearize the power system model. It returns the system matrices <span class="arithmatex">\(\small [A, B, C, D, BV, DV, BI, DI, R, S]\)</span> of the linearized state-space representation as in the following equation.</p>
<p>
<script type="math/tex; mode=display">
    \begin{align*}
    \dot{x} &= A(x-x^*)+B(u-u^*)+B_V(V-V^*)+B_I(I-I^*)＋Rd\\
    0 &= C(x-x^*)+D(u-u^*)+D_V(V-V^*)+D_I(I-I^*)\\
    z &= S(x^*-x)
    \end{align*}
 </script>
</p>
<p>Class Structure: <code>[A, B, C, D, BV, DV, BI, DI, R, S] = get_linear_matrix(obj,x_st, Vst)</code></p>
<p>Input Arguments</p>
<ul>
<li>
<p><code>x_st</code>：Equilibrium point of the state variable.</p>
</li>
<li>
<p><code>Vst</code>：Equilibrium point of the voltage <span class="arithmatex">\(-\)</span> <em>obtained from the power flow calculation.</em></p>
</li>
</ul>
<p>Output Arguments</p>
<ul>
<li><code>[A, B, C, D, BV, DV, BI, DI, R, S]</code>：System matrix of the state-space model shown above.<ul>
<li><code>R</code>: Disturbance matrix.</li>
<li><code>S</code>: Output of the evaluation function.</li>
</ul>
</li>
</ul>
<p><em>Note: Both <code>R</code> and <code>S</code> are needed when designing a control system; however, they are different from the properties of the device. Therefore, when simply performing a simulation without controller, it is safe to use <code>R</code> and <code>S</code> as zero matrices.</em></p>
<p><strong>Linear Controller State Derivation</strong></p>
<p>This method is used to obtain the derivative of the state <span class="arithmatex">\(\small (\dot{x})\)</span> of the linearized controller, as well as its input <span class="arithmatex">\(\small (u)\)</span>, satisfying the following equation</p>
<p>
<script type="math/tex; mode=display">
    \dot{x}=Ax+B_X (X-X^*)+B_V (V-V^*)+B_I (I-I^*)+B_u U_{global}\\
    u=Cx+D_X (X-X^*)+D_V (V-V^*)+D_I (I-I^*)+D_u U_{global}
 </script>
</p>
<p>Class Structure: <code>[dx, u] = get_dx_u_linear(obj, t, x, X, V, U_global)</code></p>
<p>Input Arguments</p>
<ul>
<li>
<p><code>t</code>: Time <span class="arithmatex">\(\small (t)\)</span>.</p>
</li>
<li>
<p><code>x</code>：Controller state <span class="arithmatex">\(\small (x)\)</span>.</p>
</li>
<li>
<p><code>X</code>：State of the Device connected to each bus <span class="arithmatex">\(\small (X)\)</span>.</p>
</li>
<li>
<p><code>V</code>：Busbar Voltage <span class="arithmatex">\(\small (V)\)</span> ([real part; imaginarty part]).</p>
</li>
<li>
<p><code>I</code>：Busbar Current <span class="arithmatex">\(\small (I)\)</span> ([real part; imaginarty part]).</p>
</li>
<li>
<p><code>U_global</code>： Input signals applied to each bus by the global controller <span class="arithmatex">\(\small (U)\)</span>.</p>
</li>
</ul>
<p>The controller model can only observe the above parameters. Therefore, even if there are other physical quantities required, they will have to be calculated on their own from the values of the arguments.</p>
<p>Output Parameters</p>
<ul>
<li>
<p><code>dx</code>：Dertivative of the controller state <span class="arithmatex">\(\small (\dot{x})\)</span>.</p>
</li>
<li>
<p><code>u</code>：Output signal of the controller (i.e., input signal to the system) <span class="arithmatex">\(\small (u)\)</span>.</p>
</li>
<li>
<p><code>A</code>：A matrix of controllers.</p>
</li>
<li>
<p><code>BX</code>：B matrix of the controller (regarding the stacked vector of bus states to be observed).</p>
</li>
<li>
<p><code>BV</code>：B matrix of the controller (regarding the stacked vector of voltages on all buses).</p>
</li>
<li>
<p><code>BI</code>：B matrix of the controller (regarding the stacked vector of currents on all buses).</p>
</li>
<li>
<p><code>Bu</code>：B matrix of the controller (regarding the stacked vector of input signals to all buses generated by the global controller).</p>
</li>
<li>
<p><code>C</code>：C matrix of controller.</p>
</li>
<li>
<p><code>DX</code>：D matrix of the controller (with respect to the bus state vector to be observed).</p>
</li>
<li>
<p><code>DV</code>：D matrix of the controller (regarding the stacked vector of voltages on all buses).</p>
</li>
<li>
<p><code>DI</code>：D matrix of the controller (regarding the stacked vector of currents on all buses).</p>
</li>
<li>
<p><code>Du</code>：D matrix of the controller (regarding the stacked vector of input signals to all buses generated by the global controller).</p>
</li>
</ul>
<h3 id="abstract_methods"><div style="text-align: left;"><span style="font-size: 100%; color: black; font-weight: bold">Abstract Methods</span></div><a class="headerlink" href="#abstract_methods" title="Permanent link">&para;</a></h3>
<p><strong>Linear Controller State Derivation (<code>[dx, u] = get_dx_u_linear(obj, t, x, X, V, U_global)</code>)</strong></p>
<p>This method is used to obtain the derivative of the state <span class="arithmatex">\(\small (\dot{x})\)</span> of the linearized controller, as well as its input <span class="arithmatex">\(\small (u)\)</span>.</p>
<p>Class Structure: <code>[dx, u] = get_dx_u_linear(obj, t, x, X, V, U_global)</code></p>
<p>Input Arguments</p>
<ul>
<li>
<p><code>t</code>: Time <span class="arithmatex">\(\small (t)\)</span>.</p>
</li>
<li>
<p><code>x</code>：Controller state <span class="arithmatex">\(\small (x)\)</span>.</p>
</li>
<li>
<p><code>X</code>：State of the Device connected to each bus <span class="arithmatex">\(\small (X)\)</span>.</p>
</li>
<li>
<p><code>V</code>：Busbar Voltage <span class="arithmatex">\(\small (V)\)</span> ([real part; imaginarty part]).</p>
</li>
<li>
<p><code>I</code>：Busbar Current <span class="arithmatex">\(\small (I)\)</span> ([real part; imaginarty part]).</p>
</li>
<li>
<p><code>U_global</code>： Input signals applied to each bus by the global controller <span class="arithmatex">\(\small (U)\)</span>.</p>
</li>
</ul>
<p>The controller model can only observe the above parameters. Therefore, even if there are other physical quantities required, they will have to be calculated on their own from the values of the arguments.</p>
<p>Output Parameters</p>
<ul>
<li>
<p><code>dx</code>：Dertivative of the controller state <span class="arithmatex">\(\small (\dot{x})\)</span>.</p>
</li>
<li>
<p><code>u</code>：Output signal of the controller (i.e., input signal to the system) <span class="arithmatex">\(\small (u)\)</span>.</p>
</li>
</ul>
<hr />
<h2 id="automatic_generation_control_agc"><div style="text-align: center;"><span style="font-size: 120%; color: black; font-weight: bold">Automatic Generation Control (AGC)</span></div><a class="headerlink" href="#automatic_generation_control_agc" title="Permanent link">&para;</a></h2>
<p>This child class implements a Broadcast Controller (PI Controller) class (i.e., <code>controller_broadcast_PI_AGC</code>), which assumes that a 1-Axis Synchronous Generator Model (i.e., <code>generator_1axis</code>) is used.</p>
<h3 id="variables_1"><div style="text-align: left;"><span style="font-size: 100%; color: black; font-weight: bold">Variables</span></div><a class="headerlink" href="#variables_1" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>idx_observe</code>: Busbar number observed by the controller.</p>
</li>
<li>
<p><code>idx_input</code>: Busbar number to which the output signal of the controller (i.e., the input signal to the system) are applied.</p>
</li>
<li>
<p><code>net</code>: Instance of the power network (i.e., the power system model) to which the controller will be added.</p>
</li>
<li>
<p><code>Kp</code>: Proportional gain of the controller.</p>
</li>
<li>
<p><code>Ki</code>: Integral gain of the controller.</p>
</li>
<li>
<p><code>K_broadcast</code>: Proportional gain for each generator (usually, all 1).</p>
</li>
</ul>
<h3 id="constructor_method"><div style="text-align: left;"><span style="font-size: 100%; color: black; font-weight: bold">Constructor Method</span></div><a class="headerlink" href="#constructor_method" title="Permanent link">&para;</a></h3>
<p><strong>AGC Controller (<code>obj = controller_broadcast_PI_AGC(net, y_idx, u_idx, Kp, Ki)</code>)</strong></p>
<p>Input Argument</p>
<ul>
<li>
<p><code>net</code>: Instance of the power network (i.e., the power system model) to which the controller will be added.</p>
</li>
<li>
<p><code>y_idx</code>: The number of the busbar whose output is to be observed.</p>
</li>
<li>
<p><code>u_idx</code>: Number of the busbar to which the input is applied.</p>
</li>
<li>
<p><code>Kp</code>: Proportional gain of the controller.</p>
</li>
<li>
<p><code>Ki</code>: Integral gain of the controller.</p>
</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../component/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Component Class
              </div>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright © 2020- Tokyo Tech, Ishizaki Lab.
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.18f0862e.min.js"></script>
      <script src="../../assets/javascripts/bundle.994580cf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ['navigation.tabs', 'content.code.annotate'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="https://unpkg.com/mermaid@8.0.0/dist/mermaid.min.js"></script>
      
    
  </body>
</html>